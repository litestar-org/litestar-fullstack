---
description:
globs:
alwaysApply: false
---
# Project Structure and Organization

## Objective
Define and maintain a consistent and logical project structure to improve navigability, scalability, and ease of understanding for all contributors.

## Context
- Current project layout: Python backend (`src/py/app`), JavaScript frontend (`src/js`), tests (`src/py/tests`, `tests`), docs (`docs`), tools (`tools`).
- Key configuration files: `pyproject.toml`, `Makefile`, `vite.config.ts`, `tailwind.config.js`.

## Rules

### General Principles
- **Separation of Concerns**: Keep backend, frontend, tests, scripts, and documentation in distinct top-level or `src`-level directories.
- **Modularity**: Group related files by feature or domain within their respective application layers (e.g., `src/py/app/services/users/`, `src/js/src/features/authentication/`).

### Python Backend (`src/py/app`)
- **`cli/`**: Click CLI command definitions.
- **`config.py`**: Application configuration settings (potentially loading from environment variables, .env files).
- **`db/`**: SQLAlchemy related files.
    - `models/`: SQLAlchemy model definitions.
    - `migrations/`: Alembic migration scripts.
    - `base.py` or `__init__.py`: Base model definition using Advanced Alchemy.
- **`lib/`**: Core library code, shared utilities, constants, base classes, Advanced Alchemy setup.
    - `constants.py`
    - `dependencies.py` (Litestar dependency providers)
    - `exceptions.py` (Custom application exceptions)
    - `db/plugin.py` / `db/config.py` (SQLAlchemy plugin config for Litestar)
    - `repositories/` (Advanced Alchemy repositories)
- **`schemas/`**: Pydantic schemas for data validation, serialization (DTOs).
- **`server/`**: Litestar server components.
    - `api/`: API controllers/routers, versioned (e.g., `v1/`).
    - `web/`: Routes for serving HTML pages (if any beyond SPA).
    - `guards.py`
    - `middleware.py`
- **`services/`**: Business logic layer, interacting with repositories.
- **`utils/`**: General utility functions not fitting elsewhere.
- **`asgi.py`**: ASGI application entry point, Litestar app factory (`create_app`).
- **`__init__.py`**: Package initializers.
- **`__main__.py`**: Entry point for `python -m app` (CLI runner).

### JavaScript Frontend (`src/js`)
- **`public/`**: Static assets directly served.
- **`src/`**: Main frontend source code.
    - `app.tsx` / `main.tsx`: Main application entry point.
    - `components/`: Reusable UI components.
        - `ui/`: ShadCN/UI components.
        - `custom/` or feature-specific: Project-specific components.
    - `config/` or `constants/`: Frontend configuration.
    - `hooks/`: Custom React hooks.
    - `layouts/`: Page layout components.
    - `lib/`: Utility functions, API client instances (e.g., `utils.ts` for ShadCN `cn`).
    - `pages/` or `routes/`: Page components mapped to URL routes.
    - `services/` or `api/`: API interaction layer (e.g., functions calling backend).
    - `store/` or `state/`: Global state management (if used, e.g., Zustand, Redux).
    - `styles/` or `assets/css/`: Global stylesheets (e.g., `globals.css` for Tailwind base).
- **`vite.config.ts`**: Vite build configuration.
- **`tailwind.config.js` / `.ts`**: Tailwind CSS configuration.
- **`postcss.config.js`**: PostCSS configuration.
- **`tsconfig.json`**: TypeScript configuration.
- **`package.json`**: NPM dependencies and scripts.

### Testing (`src/py/tests` and `tests`)
- **`src/py/tests/unit/`**: Unit tests for Python backend.
- **`src/py/tests/integration/`**: Integration tests for Python backend.
- **`src/py/tests/conftest.py`**: Root conftest for Pytest fixtures.
- `tests/` directory: If used, clarify its purpose (e.g., E2E tests, frontend tests if not co-located).

### Other Key Files/Folders
- **`.github/workflows/`**: GitHub Actions CI/CD workflows.
- **`docs/`**: Sphinx documentation source.
- **`tools/`**: Utility scripts, deployment tools (Docker, K8s).
- **`.env`, `.env.local.example`**: Environment variable files.
- **`pyproject.toml`**: Python project metadata, dependencies, tool configurations.
- **`Makefile`**: Common development and operational commands.

## Rules to Enforce
- New modules/features should follow the established structure.
- Avoid placing application logic in top-level directories outside `src/` unless it's a tool or script.
- Configuration files should reside in standard locations (root for project-wide, specific dirs for tool-specific like Vite/Tailwind in `src/js`).

## Exceptions
- Temporary files or experimental code should be clearly marked or placed in a `.tmp/` directory (and gitignored).
