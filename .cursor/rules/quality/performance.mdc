---
description:
globs:
alwaysApply: false
---
# Performance Guidelines

## Objective
To ensure the application is performant, providing a good user experience and efficient resource utilization.

## Context
- Async Python backend (Litestar, SQLAlchemy), JavaScript/TypeScript frontend (React/Vite).

## Rules

### Backend Performance
- **Database Queries**: Optimize SQLAlchemy queries. Use `selectinload` or `joinedload` for eager loading of related data to avoid N+1 problems. Index frequently queried columns.
- **Async Operations**: Properly use `async/await` for all I/O-bound operations.
- **Caching**: Implement caching strategies (e.g., Litestar stores, Redis) for frequently accessed, expensive-to-compute data.
- **Task Queues**: Offload long-running or resource-intensive tasks to background workers (SAQ).

### Frontend Performance
- **Bundle Size**: Keep JavaScript bundle sizes small (Vite helps with tree-shaking and code splitting).
- **Code Splitting**: Use dynamic imports (`React.lazy`) for route-based or component-based code splitting.
- **Memoization**: Use `React.memo`, `useMemo`, `useCallback` to prevent unnecessary re-renders of components.
- **Efficient Rendering**: Avoid large list rendering issues (use virtualization if needed).
- **Image Optimization**: Optimize images (compression, appropriate formats, lazy loading).

### General
- **Profiling**: Use profiling tools (e.g., `cProfile` for Python, browser dev tools for frontend) to identify bottlenecks.

## Exceptions
- Premature optimization should be avoided; focus on clear bottlenecks identified through profiling.
