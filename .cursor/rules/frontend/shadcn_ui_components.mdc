---
description:
globs:
alwaysApply: false
---
# ShadCN/UI Component Conventions

## Objective
To ensure consistent, accessible, and maintainable UI components by leveraging ShadCN/UI's methodology, promoting code reusability and adherence to project design standards. This project uses **ShadCN/UI** with **Tailwind CSS v4** and **React/TypeScript**.

## Context
- **Technologies**: ShadCN/UI, Tailwind CSS v4, React, TypeScript, Radix UI (underlying primitive library for many ShadCN components).
- **Project Files**: `src/js/components/ui/` (where ShadCN components are added via CLI), `src/js/lib/utils.ts` (for `cn` utility), `components.json` (ShadCN config).
- **Key Concepts**: Composable components, copy-paste integration (components live in your codebase), CLI for adding components, theming via CSS variables, accessibility focus.

## Rules

### Component Integration & Management
- **CLI Usage**: Use the ShadCN/UI CLI (`npx shadcn-ui@latest add <component_name>`) to add new components to the project.
    - ✅ `npx shadcn-ui@latest add button card dialog`
    - ❌ Manually copying component code from the ShadCN/UI website unless for specific, documented reasons (e.g., for components not yet in the CLI or for applying manual patches).
- **File Structure**: Keep ShadCN/UI components within the `src/js/components/ui/` directory as per standard convention.
- **Component Ownership**: Remember that ShadCN/UI components are copied into your codebase. You own them and are expected to customize them as needed.
- **Updating Components**: To update components to a newer version from ShadCN/UI, use the CLI with the `--overwrite` flag. Always review the diff carefully before committing changes.
    - ✅ `npx shadcn-ui@latest add button --overwrite` (then `git diff` and review)

### Styling and Theming
- **Tailwind CSS v4**: ShadCN/UI components are styled using Tailwind CSS. All styling customizations should primarily be done via Tailwind utility classes within the component files or by modifying the component's internal Tailwind classes.
    - See `.cursor/rules/frontend/tailwind_css_v4.mdc` for Tailwind guidelines.
- **CSS Variables for Theming**: Utilize CSS variables for theming, as is standard with ShadCN/UI and Tailwind CSS v4. Define these in your global CSS file (e.g., `src/js/src/globals.css`).
    - `components.json` (`rsc` flag, `tailwind.configPath`, `tailwind.css`, `tailwind.baseColor`, `tailwind.cssVariables`) and `tailwind.config.js` should be configured to use these CSS variables (often HSL values).
    - ✅ Ensure `tailwind.config.js` correctly maps theme colors to these CSS variables (e.g., `primary: 'hsl(var(--primary))'`).
- **`cn` Utility**: Use the `cn` utility function (typically found in `src/js/lib/utils.ts`) for conditionally applying Tailwind classes and merging `className` props.
    - ✅ `className={cn("font-bold", isActive && "bg-primary", props.className)}`
- **Avoid Global CSS Overrides**: Do not write global CSS that directly targets ShadCN component base classes in a way that could lead to specificity wars or unexpected side effects. Prefer direct component modification or Tailwind utility application.

### Component Usage & Composition
- **Composition**: Leverage the composable nature of ShadCN/UI components. Build complex UI elements by combining simpler ShadCN components.
    - ✅ Example: Using `<Card>`, `<CardHeader>`, `<CardTitle>`, `<CardContent>`, `<CardFooter>` together.
- **Props for Customization**: When using ShadCN components, utilize their defined props for behavior and appearance modifications before directly editing the component's source code for one-off changes. If a prop is missing for a desired common customization, consider modifying the base component in `src/js/components/ui/` to accept it.
- **Accessibility (A11y)**: ShadCN/UI components are built with accessibility in mind (often using Radix UI primitives). Preserve and enhance these accessibility features.
    - Ensure appropriate ARIA attributes are used if components are heavily customized or composed.
    - Ensure all interactive elements have proper focus states and are keyboard navigable.
    - Test with screen readers periodically.

### Creating New Custom UI Components (Alongside ShadCN)
- **Follow ShadCN Philosophy**: When creating new custom components (not available in ShadCN/UI but needed for the project):
    - Style with Tailwind CSS utility classes.
    - Aim for composability and reusability.
    - Prioritize accessibility from the start (consider using Radix UI primitives if appropriate for headless logic).
    - Place them in a relevant directory, e.g., `src/js/components/custom/` or alongside feature-specific components.
    - Use the `cn` utility for class name construction.

## Exceptions
- If a very specific, non-reusable visual tweak is needed for a ShadCN component in a single instance, direct modification of its utility classes at the point of use is acceptable. However, if this pattern repeats, consider creating a new variant within the component file itself or a new composed component.
