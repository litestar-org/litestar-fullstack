---
description:
globs:
alwaysApply: false
---
# SQLAlchemy Model Conventions

## Objective
To ensure SQLAlchemy models are defined consistently, integrating with Advanced Alchemy and following best practices.

## Context
- SQLAlchemy 2.0, Advanced Alchemy, Alembic.
- Focus on model structure, relationships, and typing.

## Rules

### Model Definition
- Inherit from project's Advanced Alchemy base model (e.g., `app.lib.db.base.Base`).
- Use `Mapped` and `mapped_column` for all attributes.
- Define `__tablename__` explicitly.

### Relationships
- Clearly define relationships (`relationship()`) with appropriate `back_populates`, `lazy` loading strategies.

### Typing
- Ensure all model attributes and relationships are fully type-hinted.

## Exceptions
- Potentially views or SQL constructs mapped via `SQLQuery` from Advanced Alchemy.
