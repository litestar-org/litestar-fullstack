---
description:
globs:
alwaysApply: false
---
# Asynchronous Programming Conventions

## Objective
To ensure correct and efficient use of `async` and `await` for I/O-bound operations.

## Context
- Litestar is an ASGI framework, inherently asynchronous.
- SQLAlchemy configured for async operations with Advanced Alchemy.

## Rules

### `async`/`await` Usage
- Use `async def` for all Litestar route handlers, service methods, and repository methods that perform I/O (database calls, external API requests).
- `await` all calls to `async` functions.

### Blocking Calls
- Avoid blocking I/O operations in async code. If unavoidable, run them in a separate thread pool (e.g., using `anyio.to_thread.run_sync`).

### Concurrency
- Use `asyncio.gather()` for concurrent execution of multiple awaitables when appropriate.

## Exceptions
- Synchronous utility functions that are purely CPU-bound.
- CLI commands might have synchronous parts.
